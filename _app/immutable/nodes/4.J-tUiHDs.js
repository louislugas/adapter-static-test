import{S as e,i as t,s as a,c as o,d as n,t as s,a as i,u as r,g as l,b as d,e as c,q as h,f as u,k as p,r as m,m as f,n as g,L as v,l as w,w as y,y as b,M as $,N as x,h as k,v as T,x as A,o as S,O as E,G as M,j as I,B,I as L,P as C,J as F,C as N,H as V,A as R,K as _,Q as D,R as H}from"../chunks/bkKGU34Z.js";import"../chunks/BzQdJGSh.js";import{z as G}from"../chunks/D5bNc6b2.js";const K="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function J(e){return void 0!==(null==e?void 0:e.length)?e:Array.from(e)}function P(e){let t,a,g;const v=e[1].default,w=o(v,e,e[0],null);return{c(){t=f("section"),a=f("div"),w&&w.c(),this.h()},l(e){t=p(e,"SECTION",{class:!0});var o=m(t);a=p(o,"DIV",{class:!0});var s=m(a);w&&w.l(s),s.forEach(n),o.forEach(n),this.h()},h(){u(a,"class","svelte-1pjwwag"),u(t,"class","svelte-1pjwwag")},m(e,o){c(e,t,o),h(t,a),w&&w.m(a,null),g=!0},p(e,[t]){w&&w.p&&(!g||1&t)&&r(w,v,e,e[0],g?d(v,e[0],t,null):l(e[0]),null)},i(e){g||(i(w,e),g=!0)},o(e){s(w,e),g=!1},d(e){e&&n(t),w&&w.d(e)}}}function j(e,t,a){let{$$slots:o={},$$scope:n}=t;return e.$$set=e=>{"$$scope"in e&&a(0,n=e.$$scope)},[n,o]}class W extends e{constructor(e){super(),t(this,e,j,P,a,{})}}const O=""+new URL("../assets/title.JPCtRTfh.png",import.meta.url).href;function U(e){let t,a,o,s,i,r=`<img src="${O}" alt="soil defender title header\t" class="svelte-xtt5ax"/>`,l="Start";return{c(){t=f("div"),t.innerHTML=r,a=b(),o=f("button"),o.textContent=l,this.h()},l(e){t=p(e,"DIV",{class:!0,"data-svelte-h":!0}),"svelte-14c7yso"!==w(t)&&(t.innerHTML=r),a=y(e),o=p(e,"BUTTON",{class:!0,"data-svelte-h":!0}),"svelte-100f2gv"!==w(o)&&(o.textContent=l),this.h()},h(){u(t,"class","header-container svelte-xtt5ax"),u(o,"class","svelte-xtt5ax")},m(n,r){c(n,t,r),c(n,a,r),c(n,o,r),s||(i=v(o,"click",e[1]),s=!0)},p:g,i:g,o:g,d(e){e&&(n(t),n(a),n(o)),s=!1,i()}}}function q(e,t,a){let{page:o}=t;return e.$$set=e=>{"page"in e&&a(0,o=e.page)},[o,()=>{a(0,o=1)}]}class X extends e{constructor(e){super(),t(this,e,q,U,a,{page:0})}}const Y=""+new URL("../assets/mountain_icon.BGKUGTzP.png",import.meta.url).href,Q=""+new URL("../assets/forest_icon.BdsN0XQr.png",import.meta.url).href,Z=""+new URL("../assets/farm_icon.iPIT0RUT.png",import.meta.url).href;function ee(e,t,a){const o=e.slice();return o[4]=t[a],o[6]=a,o}function te(e){let t,a,o,s,i,r,l,d,w,$,S,E,M,I,B,L=e[4].w+"";return{c(){t=f("div"),a=f("div"),o=f("h2"),s=A(L),i=b(),r=f("div"),l=f("img"),w=b(),$=f("div"),S=f("button"),E=A("Start"),M=b(),this.h()},l(e){t=p(e,"DIV",{class:!0,"data-world":!0});var d=m(t);a=p(d,"DIV",{class:!0,"data-world":!0});var c=m(a);o=p(c,"H2",{class:!0});var h=m(o);s=T(h,L),h.forEach(n),c.forEach(n),i=y(d),r=p(d,"DIV",{class:!0,"data-world":!0});var u=m(r);l=p(u,"IMG",{src:!0,"data-world":!0,class:!0}),u.forEach(n),w=y(d),$=p(d,"DIV",{class:!0,"data-world":!0});var f=m($);S=p(f,"BUTTON",{"data-world":!0,"data-l":!0,class:!0});var g=m(S);E=T(g,"Start"),g.forEach(n),f.forEach(n),M=y(d),d.forEach(n),this.h()},h(){u(o,"class","svelte-efhfmz"),u(a,"class","card-title svelte-efhfmz"),u(a,"data-world",e[4].w),k(l.src,d="Forest"==e[4].w?Q:"Mountain"==e[4].w?Y:Z)||u(l,"src",d),u(l,"data-world",e[4].w),u(l,"class","svelte-efhfmz"),u(r,"class","card-image svelte-efhfmz"),u(r,"data-world",e[4].w),u(S,"data-world",e[4].w),u(S,"data-l",e[4].l),u(S,"class","svelte-efhfmz"),u($,"class","card-button svelte-efhfmz"),u($,"data-world",e[4].w),u(t,"class","card svelte-efhfmz"),u(t,"data-world",e[4].w)},m(n,d){c(n,t,d),h(t,a),h(a,o),h(o,s),h(t,i),h(t,r),h(r,l),h(t,w),h(t,$),h($,S),h(S,E),h(t,M),I||(B=[v(S,"click",e[1]),v(t,"click",e[1])],I=!0)},p:g,d(e){e&&n(t),I=!1,x(B)}}}function ae(e){let t,a,o,s=`<img src="${O}" alt="soil defender title header\t" class="svelte-efhfmz"/>`,i=J(e[0]),r=[];for(let n=0;n<i.length;n+=1)r[n]=te(ee(e,i,n));return{c(){t=f("div"),t.innerHTML=s,a=b(),o=f("div");for(let e=0;e<r.length;e+=1)r[e].c();this.h()},l(e){t=p(e,"DIV",{class:!0,"data-svelte-h":!0}),"svelte-14c7yso"!==w(t)&&(t.innerHTML=s),a=y(e),o=p(e,"DIV",{class:!0});var i=m(o);for(let t=0;t<r.length;t+=1)r[t].l(i);i.forEach(n),this.h()},h(){u(t,"class","header-container svelte-efhfmz"),u(o,"class","container svelte-efhfmz")},m(e,n){c(e,t,n),c(e,a,n),c(e,o,n);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(o,null)},p(e,[t]){if(3&t){let a;for(i=J(e[0]),a=0;a<i.length;a+=1){const n=ee(e,i,a);r[a]?r[a].p(n,t):(r[a]=te(n),r[a].c(),r[a].m(o,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=i.length}},i:g,o:g,d(e){e&&(n(t),n(a),n(o)),$(r,e)}}}function oe(e,t,a){let{page:o}=t,{world:n}=t;return e.$$set=e=>{"page"in e&&a(2,o=e.page),"world"in e&&a(3,n=e.world)},[[{w:"Farmland",l:1},{w:"Mountain",l:2},{w:"Forest",l:3}],function(e){a(3,n=e.target.dataset.world),a(2,o=2)},o,n]}class ne extends e{constructor(e){super(),t(this,e,oe,ae,a,{page:2,world:3})}}let se=["The Himalayas contain over 15,000 glaciers, making it the largest store of ice outside the Polar Regions.","Extensive terracing has been used for centuries in many Asian countries to cultivate sloping land.","Tibet, often called the “Roof of the World,” has an average elevation of over 4,000 m and is characterized by extensive Cryosols due to permafrost.","The Himalayan mountains act as a major climatic barrier, influencing soil formation processes on either side of the range.","The Philippines has varied topography with volcanic mountains forming the core of larger islands, such as Mount Apo on Mindanao.","The Banda Arc is a chain of volcanoes running along the southern coastlines of the Greater and Lesser Sunda Islands, resulting from the subduction of the Australian Plate under the Eurasian Plate.","Northern Thailand and Laos are characterized by mountainous, rugged forested landscapes with plains and plateaus crossed by numerous rivers."],ie=["Laos had 17.9 million hectares of natural forest in 2010, covering 78% of its land area. By 2022, it lost 322,000 hectares of natural forest, equivalent to 168 million tons of CO2 emissions.","More than 70 percent of Laos' population depends on forest resources, soil, wetlands, and fish for income and nutrition.","Around 41.6% of the geothermal energy potential in Indonesia is in protected forests or conservation areas.","In Java, there are 8 geothermal projects, mostly in West Java, all in protected forests and conservation areas.","Asian soils store 248 petagrams of carbon and have the potential to sequester an additional 180 metric tonnes of carbon per year with sustainable practices.","The “Green Wall of China” is a massive project to halt desertification and soil erosion that started in 1978 is expected to be completed in 2050.","Northern Thailand and Laos are characterized by mountainous, rugged forested landscapes with plains and plateaus crossed by numerous rivers."],re=["The soil in Java is highly degraded, primarily due to intensive agricultural practices and the conversion of urban development and infrastructure projects.","India has a commitment to achieve land degradation neutrality by 2030, and it has said it will restore 26 million hectares in the process.","Three percent of India's landmass faces “catastrophic” topsoil loss.India's soil health card scheme was launched in 2015.","Degraded land in India approximates to 12 million hectares, accounting for 35.74% of the country's total area, according to a 2021 land survey by the Ministry of Natural Resources and Environment.","The intensification of Vietnamese agriculture has featured very heavy use of fertilizer and pesticides. Between 1/2 and 2/3 of fertilizer and nutrients respectively are not taken up by crops.","More than 10 million tons of fertilizer are used annually in Vietnam (about 2/3 of fertilizer is used for rice).","Fertilizer is the largest single-cost item for crops in Vietnam. The fertilizer application rate is around 180 kg per hectare of paddy soils (this rate is about 30–200% higher than in other Southeast Asian countries).","About 95% of Vietnamese farmers overused pesticides for both rice and fruit farming systems.","More than 99.9% of pesticides in Vietnam migrate into the environment where they adversely affect public health and beneficial organisms and contaminate soil, water, and the atmosphere of surrounding ecosystems.","Vietnam has begun implementing the “One Million Hectares of High-Quality Rice” Project, aiming for sustainable rice cultivation, emissions reduction, and soil restoration.","By 2025, Vietnam has targeted a 20% reduction in chemical fertilizers and pesticides, as well as a 20% decrease in irrigated water usage.","By 2030, Vietnam aims to achieve a 30% reduction in chemical fertilizers and pesticides.","El Niño influences in Northeast Thailand lead to heavy rains at the start and end of the rainy season with extended dry spells in between, causing significant soil nutrient loss and increasing desertification risk.","Sandy soils in regions like Roi Et Province, Thailand are particularly susceptible to nutrient depletion due to their inability to retain water and nutrients, exacerbating soil degradation during dry periods.","Desertification threatens agricultural productivity and local communities in Thailand, leading to reduced crop yields, food insecurity, and economic challenges, highlighting the need for sustainable land management and soil conservation practices.","About 60% of the world's population lives in Asia, with land-based agriculture being the main livelihood for over 2.2 billion people. 5.3 billion will live in Asia by 2050.","It takes up to 1,000 years to produce a few centimeters of topsoil but only a few minutes for it to be degraded.","In the Asian-Pacific region in 2020, an estimated 375.8 million people faced hunger, and over 1.1 billion were food insecure.","On average throughout Asia, there are approximately 13 quadrillion living organisms in a given 8-centimeter block of soil.","The equivalent weight of bacteria in 1 hectare of soil in Asia is that of 2 cows (~1000 kg).","1 gram of healthy soil in Asia contains more organisms than there are people on planet Earth.","Fluvisols are common along major river valleys and deltas.","Southeast Asia is characterized by highly leached, acidic soils like Acrisols and Ferralsols.","Andosols (volcanic soils) are common in Japan and Indonesia.","Histosols (peat soils) are widespread in the lowlands of Indonesia and Malaysia.","The Deccan Plateau in India has black, clay-rich soils that are very fertile but difficult to cultivate when too wet or dry.","Oases in Asian deserts demonstrate how seemingly infertile soils can be cultivated with sufficient water.","The loess soils of China are highly productive but very susceptible to erosion. It is formed by the accumulation of wind-blown dust (loess) from nearby deserts that became compacted over time under arid climates.","Volcanic soils in parts of Asia like Indonesia are often very fertile due to mineral content.The rice paddy soils of Asia have been cultivated for thousands of years in the same exact places on some parts of the continent.","Acid sulfate soils are a significant problem in some coastal areas of Southeast Asia.","Asian soils face threats from erosion, pollution, loss of organic matter, and salinization.","Many traditional soil management practices in Asia are being lost as farming becomes more industrial and less small-scale.","Extensive terracing has been used for centuries in many Asian countries to cultivate sloping land.","Soil pollution from industry and agriculture is a major concern in countries like China and India.","Climate change is altering soil moisture regimes across Asia, impacting agriculture.","There is growing recognition in Asia of the need for sustainable soil management to ensure food security.","The Turpan Depression in China, at 154 m below sea level, is the second lowest depression on Earth and features Anthrosols due to heavy irrigation.","The Ganges-Brahmaputra Delta, the world's largest delta, is predominantly composed of Gleysols due to high water tables and regular seasonal flooding.","Myanmar is characterized by acidic Ferralsols, reflecting high leaching and weathering in the region's humid tropical climate.","The Red River Delta in Vietnam is composed of a combination of Fluvisols and Gleysols, reflecting its dynamic fluvial environment.","Vertisols are widespread on the level ground of paddy rice fields and alluvial plains in the Philippines.","Deep and well-drained, acidic Acrisols have formed from the weathering of basalt and andesite on undulating terraces and steep foot slopes of hills and mountains in the Philippines.","Very fertile Phaeozems with organic-rich topsoils can be found on stable limestone uplands in Luzon, Bohol, Cebu, and other Philippine islands.","On Kalimantan Island, Indonesia, intense weathering and leaching due to high temperatures and precipitation have formed extensive iron-rich Ferralsols and Cambisols with low pH, nutrients, and organic matter levels.","Saline Fluvisols are found under coastal mangroves in Kalimantan that are subject to daily tidal flooding or river flows.","Andosols are extensively developed on lava flows and ash deposits adjacent to volcanic cones and vents in Sumatra, Java, Bali, and Lombok.","Ferralsols and Acrisols, found on hilly terrain in Sumatra, western Java, and Kalimantan, are characterized by low pH, nutrients, and organic matter levels due to intense weathering and leaching.","The Indus River, one of Asia's major rivers and the 19th longest in the world, forms a fertile floodplain west of the Thar Desert.","The Gujarat Plains reflect the transportation of vast volumes of sediments eroded from the Himalayas and Hindu Kush mountains.","Dark, clay-rich Vertisols dominate the western part of the Gujarat Plains, extending into central India.","Central Thailand is mostly a lowland plain drained by tributaries of the Chao Phraya River, which forms a large delta near Bangkok.","In Thailand and Laos, the dominant soil types are yellow or red Acrisols, resulting from intense chemical weathering under hot and humid conditions.","The Mekong Delta region is characterized by Fluvisols, with Gleysols and Histosols in depressions and lower elevations."];function le(e,t){return e/2-3*t}function de(e,t,a){let o,n,{isMenu:s,world:i}=t;return S((()=>{o=document.getElementsByTagName("canvas"),n=[...o],n.forEach(((e,t)=>{t==n.length-1||e.remove()})),o=document.getElementsByTagName("canvas"),n=[...o]})),e.$$set=e=>{"isMenu"in e&&a(0,s=e.isMenu),"world"in e&&a(1,i=e.world)},e.$$.update=()=>{if(2&e.$$.dirty){let e=function(){width()>height()?(r=height()/6*.55,d=le(width()+r,r),l=height()/8*2):height()>width()&&(r=width()/6*.8,l=le(height()+r,r),d=width()/6)};G({background:[240,220,106]});const t=400,o=120;loadFont("Jua","/fonts/Jua-Regular.ttf"),loadFont("Nunito","/fonts/Nunito-VariableFont_wght.ttf"),loadSprite("pineapple","/images/sprites/pineapple.png"),loadSprite("bean","/images/sprites/bean.png"),loadSprite("ghosty","/images/sprites/ghosty.png"),loadSprite("farmGroundTile","/images/sprites/farm-ground-tile.png"),loadSprite("forestGroundTile","/images/sprites/forest-ground-tile.png"),loadSprite("mountainGroundTile","/images/sprites/mountain-ground-tile.png"),loadSprite("mountBlock","/images/sprites/mountain_blocker.png"),loadSprite("farmBlock","/images/sprites/farm_blocker.png"),loadSprite("forestBlock","/images/sprites/forest_blocker.png"),loadSprite("farmBase","/images/sprites/farm-base-tile.png"),loadSprite("mountainBase","/images/sprites/mountain-base-tile.png"),loadSprite("forestBase","/images/sprites/forest-base-tile.png"),loadSprite("farmBullet","/images/sprites/farm_bullet.png"),loadSprite("mountainBullet","/images/sprites/mountain_bullet.png"),loadSprite("forestBullet","/images/sprites/forest_bullet.png"),loadSprite("farmShoot","/images/sprites/farm_shooter.png",{sliceX:6,anims:{idle:0,move:{from:0,to:5,speed:12,loop:!1}}}),loadSprite("mountainShoot","/images/sprites/mountain_shooter.png",{sliceX:6,anims:{idle:0,move:{from:0,to:5,speed:12,loop:!1}}}),loadSprite("forestShoot","/images/sprites/forest_shooter.png",{sliceX:6,anims:{idle:0,move:{from:0,to:5,speed:12,loop:!1}}}),loadSprite("forestEnemy","/images/sprites/forest_enemy.png",{sliceX:4,anims:{idle:0,move:{from:0,to:3,speed:8,loop:!0}}}),loadSprite("farmEnemy","/images/sprites/farm_enemy.png",{sliceX:4,anims:{idle:0,move:{from:0,to:3,speed:8,loop:!0}}}),loadSprite("mountainEnemy","/images/sprites/mountain_enemy.png",{sliceX:4,anims:{idle:0,move:{from:0,to:3,speed:8,loop:!0}}}),loadSprite("noTex","/images/sprites/cross.png"),loadSound("hit","/audio/hit.mp3"),loadSound("explode","/audio/explode.mp3"),loadSound("shoot","/audio/shoot.mp3"),loadSound("bgMusic","/audio/bgmusic.mp3"),volume(.5);const n=play("bgMusic",{loop:!0,paused:!0});let r=64,l=0,d=0,c=!1,h=[],u=!0;scene("startGame",(({world:a})=>{n.paused=!1,e(),onResize((()=>{e()}));let s=20,i=100,p=[3,6,5,10,8,16],m=0,f=0,g=0;c=!1,u=!0,addLevel(["%#####","%#####","%#####","%#####","%#####","%#####"],{tileWidth:r,tileHeight:r,pos:vec2(d,l),tiles:{"#":()=>[sprite("Farmland"==a?"farmGroundTile":"Forest"==a?"forestGroundTile":"Mountain"==a?"mountainGroundTile":"noTex"),area(),anchor("center"),scale(r/32),"grid","ground","tile",{tower:!1,name:"grid"}],"%":()=>[sprite("Farmland"==a?"farmBase":"Forest"==a?"forestBase":"Mountain"==a?"mountainBase":"noTex"),area(),pos(0,r/2),anchor("bot"),scale(r/32),"base","ground","tile",{name:"base",state:"alive"}]}});const v=get("*");console.log(v),v[0].children.forEach(((e,t)=>{"grid"==e.name?e.add([rect(2,20),pos(-r/4,0),anchor("center"),area(),scale(r/64),opacity(0),"stopper"]):"base"==e.name&&e.add([rect(2,20),pos(0,0),anchor("center"),color(YELLOW),area(),scale(r/64),opacity(0),z(20),"basestopper",{index:t}])}));const w=[...new Set(v[0].children.filter((e=>"grid"==e.name)).map((e=>e.pos.y)))],y=Math.max(...v[0].children.filter((e=>"grid"==e.name)).map((e=>e.pos.x)));let b=add([rect(200,120),anchor("center"),pos(width()/2,height()/24*21),opacity(0)]),$=b.add([rect(80,120,{radius:4}),anchor("center"),pos(-50,0),outline(2),scale(1.1),area(),"shootercard"]);$.add([text("plant",{size:16,font:"Jua"}),pos(0,-45),anchor("center"),color(BLACK)]),$.add([sprite("Farmland"==a?"farmShoot":"Mountain"==a?"mountainShoot":"Forest"==a?"forestShoot":"pineapple"),pos(0,0),anchor("center"),scale(1.5)]),$.add([text("cost: 7",{size:16,font:"Jua"}),pos(0,45),anchor("center"),color(BLACK)]);let x=b.add([rect(80,120,{radius:4}),anchor("center"),pos(50,0),outline(2),scale(.95),area(),"blockercard"]);x.add([text("rock",{size:16,font:"Jua"}),pos(0,-45),anchor("center"),color(BLACK)]),x.add([sprite("Farmland"==a?"farmBlock":"Mountain"==a?"mountBlock":"Forest"==a?"forestBlock":"pineapple"),pos(0,0),anchor("center"),scale(1.5)]),x.add([text("cost: 3",{size:16,font:"Jua"}),pos(0,45),anchor("center"),color(BLACK)]),$.onClick((e=>{c&&(u=!0,x.scale=vec2(.95),$.scale=vec2(1.1))})),x.onClick((e=>{c&&(u=!1,$.scale=vec2(.95),x.scale=vec2(1.1))}));let k=add([text(s,{font:"Jua"}),pos(width()/2,70),anchor("center"),color(BLACK)]);add([text(`${a}`,{width:300,size:16,align:"center",font:"Nunito"}),pos(width()/2,40),anchor("center"),color(BLACK)]);let T,A=add([rect(200,15),anchor("center"),pos(width()/2,100),outline(4)]).add([rect(2*i,12),anchor("left"),pos(-100,0),color(GREEN)]);function S(e,t,o,n,s){"shooter"==s?(h[e]=add([sprite("Farmland"==a?"farmShoot":"Mountain"==a?"mountainShoot":"Forest"==a?"forestShoot":"pineapple"),pos(t,o+r/2),anchor("bot"),area({shape:new Rect(vec2(0),24,24)}),scale(r/32),z(n+10),"tower",state("move",["move","idle"]),{grid_id:e,y_index:n,blocker:!1}]),E(e,t,o+r/2,n)):"blocker"==s&&add([sprite("Farmland"==a?"farmBlock":"Mountain"==a?"mountBlock":"Forest"==a?"forestBlock":"pineapple"),pos(t,o+r/2),anchor("bot"),area({shape:new Rect(vec2(0),24,24)}),health(2),scale(r/32),z(n+10),"blocker",{grid_id:e,y_index:n,blocker:!0}])}function E(e,o,n,s){let i=get("enemy").map((e=>e.y_index));if(c){let l=v[0].children.map((e=>e.id)).findIndex((t=>t==e));v[0].children[l].tower&&(i.includes(s)?(h[e].play("move"),wait(.3,(()=>{play("shoot"),add([sprite("Farmland"==a?"farmBullet":"Forest"==a?"forestBullet":"Mountain"==a?"mountainBullet":"pineapple"),area(),pos(o,n-r/2),anchor("center"),scale(r/32),move(RIGHT,t),offscreen({destroy:!0}),"bullet"]),wait(2,(()=>E(e,o,n,s)))}))):wait(1,(()=>E(e,o,n,s))))}}function M(e){let t=randi(0,w.length);var n;1==e?(f++,n=t,add([sprite("Farmland"==a?"farmEnemy":"Forest"==a?"forestEnemy":"Mountain"==a?"mountainEnemy":"noTex"),area({shape:new Rect(vec2(0),24,24)}),scale(r/32),pos(y+width()/3+100,w[n]+l+r/2),z(n+10),health(m<2?2:m>=2&&m<4?3:m>=4?5:4),anchor("bot"),"trash","enemy",`enemy-${n}`,state("move",["move","idle"]),{speed:o,distance:0,y_index:n}])):f=0}function I(e,t){T=add([rect(300,180,{radius:4}),pos(width()/2,height()/2),anchor("center"),color(WHITE),area(),outline(2),z(100),"wavebutton"]),T.add([text(e,{size:20,font:"Jua"}),anchor("top"),pos(0,-75),color(BLACK),area()]),T.add([text(t,{size:12,width:250,font:"Nunito"}),pos(0,-50),anchor("top"),color(BLACK),area()]),T.add([text("click to start wave",{size:12,font:"Nunito"}),pos(0,75),anchor("bot"),color(BLACK),area()])}function B(){c&&(M(1),wait(4,(()=>{f<p[m]&&B()})))}function L(e){return{update(){const t=e*dt();this.scale.x+=t,this.scale.y+=t}}}function C(e,t,a,o){for(let n=0;n<t;n++)wait(rand(.1*t),(()=>{for(let t=0;t<2;t++)add([pos(e.add(rand(vec2(-a),vec2(a)))),circle(4),scale(1*o,1*o),lifespan(.1),L(rand(48,72)*o),anchor("center")])}))}onClick("grid",(e=>{c&&(e.tower?console.log("tower already exist"):u?s>=7&&(e.tower=!0,S(e.id,e.pos.x+d,e.pos.y+l,w.findIndex((t=>t==e.pos.y)),"shooter"),s-=7,k.text=s):u||s>=3&&(e.tower=!0,S(e.id,e.pos.x+d,e.pos.y+l,w.findIndex((t=>t==e.pos.y)),"blocker"),s-=3,k.text=s))})),onAdd("enemy",(e=>{e.play("move"),e.onStateEnter("idle",(()=>{e.play("idle"),wait(1,(()=>{e.enterState("move"),e.play("move")}))}))})),onUpdate("trash",(e=>{"move"==e.state&&(e.move(-e.speed,0),e.pos.x+e.width<width()/3-100&&destroy(e))})),onCollide("enemy","stopper",((e,t)=>{e.enterState("idle"),e.distance=0})),onCollide("enemy","basestopper",((e,t)=>{e.enterState("idle"),e.distance=0,shake(10),play("explode"),destroy(e),v[0].children.forEach(((e,a)=>{"base"==e.name&&e.id==t.parent.id&&(e.color=RED)})),C(e.pos,2,48,2),i>30?(i-=35,A.width=2*i):(i=0,A.width=2*i,wait(.5,(()=>{go("lose")})))})),onCollide("bullet","enemy",((e,t)=>{t.color=RED,destroy(e),t.hurt(1),play("hit"),C(e.pos,1,24,1),wait(.2,(()=>{t.color=WHITE}))})),on("hurt","enemy",(e=>{shake(1)})),on("death","enemy",(e=>{wait(.1,(()=>{destroy(e),shake(2),m<2?s+=2:m>=2&&m<4?s+=3:m>=4&&(s+=4),k.text=s}))})),onCollide("tower","enemy",((e,t)=>{destroy(t),destroy(e),v[0].children.filter((t=>t.id==e.grid_id))[0].tower=!1,shake(10),C(e.pos,1,24,1)})),onCollide("blocker","enemy",((e,t)=>{destroy(t),destroy(e),play("explode"),v[0].children.filter((t=>t.id==e.grid_id))[0].tower=!1,shake(10),C(e.pos,1,24,1),m<2?s+=2:m>=2&&m<4?s+=3:m>=4&&(s+=4),k.text=s})),onDestroy("enemy",(()=>{g++,g==p[m]&&(g=0,m==p.length-2?(M(0),c=!1,wait(1,(()=>{"Farmland"==a?I("FINAL WAVE",choose(re)):"Mountain"==a?I("FINAL WAVE",choose(se)):"Forest"==a&&I("FINAL WAVE",choose(ie)),m++}))):m<p.length-1?(M(0),c=!1,wait(1,(()=>{"Farmland"==a?I("WAVE "+(m+2),choose(re)):"Mountain"==a?I("WAVE "+(m+2),choose(se)):"Forest"==a&&I("WAVE "+(m+2),choose(ie)),m++}))):(M(0),c=!1,wait(1,(()=>{go("finish")}))))})),wait(1,(()=>{"Farmland"==a?I("WAVE 1",choose(re)):"Mountain"==a?I("WAVE 1",choose(se)):"Forest"==a&&I("WAVE 1",choose(ie))})),onClick("wavebutton",(()=>{T.destroy(),c=!0,get("tower").forEach((e=>{E(e.grid_id,e.pos.x,e.pos.y,e.y_index)})),B()}))})),scene("lose",(()=>{c=!1,n.paused=!0,add([text("YOU LOSE",{font:"Jua"}),pos(width()/2,height()/9*4),anchor("center"),color(BLACK)]),add([rect(250,60,{radius:4}),pos(width()/2,height()/9*5),anchor("center"),outline(2),area(),"replay"]).add([text("PLAY AGAIN",{font:"Nunito",size:20}),color(BLACK),anchor("center")]),add([rect(250,60,{radius:4}),pos(width()/2,height()/9*6),anchor("center"),outline(2),area(),"quitbutton"]).add([text("MENU",{font:"Nunito",size:20}),color(BLACK),anchor("center")]),onClick("replay",(()=>{go("startGame",{world:i})})),onClick("quitbutton",(()=>{a(0,s=!0)}))})),scene("finish",(()=>{c=!1,n.paused=!0,add([text("YOU WIN",{font:"Jua"}),pos(width()/2,height()/9*4),anchor("center"),color(BLACK)]),add([rect(250,60,{radius:4}),pos(width()/2,height()/9*5),anchor("center"),outline(2),area(),"quitbutton"]).add([text("MENU",{font:"Nunito",size:20}),color(BLACK),anchor("center")]),onClick("quitbutton",(()=>{a(0,s=!0)}))}))}3&e.$$.dirty&&(s||go("startGame",{world:i}))},[s,i]}class ce extends e{constructor(e){super(),t(this,e,de,null,a,{isMenu:0,world:1})}}const he=""+new URL("../assets/instruction-1._cEk_Dak.png",import.meta.url).href,ue=""+new URL("../assets/instruction-2.Dx1s32cR.png",import.meta.url).href;function pe(e){let t,a,o,s,i,r,l,d,$=`<div class="image svelte-6m361w"><img src="${he}" alt="attack instruction" class="svelte-6m361w"/></div> <div class="image svelte-6m361w"><img src="${ue}" alt="defense instruction" class="svelte-6m361w"/></div>`,x='<p class="svelte-6m361w"><strong>Defend soil health!</strong><br/><br/>Use the <em><strong>plant</strong></em> to launch projectiles at the enemy, or the <em><strong>rock</strong></em> to block them from advancing. Click anywhere on the grid to place your <em><strong>plant</strong></em> or <em><strong>rock</strong></em>.<br/><br/>May the dirt be with you!</p>',k="Start";return{c(){t=f("section"),a=f("div"),a.innerHTML=$,o=b(),s=f("div"),s.innerHTML=x,i=b(),r=f("button"),r.textContent=k,this.h()},l(e){t=p(e,"SECTION",{class:!0});var l=m(t);a=p(l,"DIV",{class:!0,"data-svelte-h":!0}),"svelte-154ul9p"!==w(a)&&(a.innerHTML=$),o=y(l),s=p(l,"DIV",{class:!0,"data-svelte-h":!0}),"svelte-19oo5ou"!==w(s)&&(s.innerHTML=x),i=y(l),r=p(l,"BUTTON",{class:!0,"data-svelte-h":!0}),"svelte-7l2nhb"!==w(r)&&(r.textContent=k),l.forEach(n),this.h()},h(){u(a,"class","top svelte-6m361w"),u(s,"class","bottom svelte-6m361w"),u(r,"class","svelte-6m361w"),u(t,"class","svelte-6m361w")},m(n,u){c(n,t,u),h(t,a),h(t,o),h(t,s),h(t,i),h(t,r),l||(d=v(r,"click",e[3]),l=!0)},p:g,i:g,o:g,d(e){e&&n(t),l=!1,d()}}}function me(e,t,a){let{page:o,world:n,isMenu:s}=t;return e.$$set=e=>{"page"in e&&a(1,o=e.page),"world"in e&&a(2,n=e.world),"isMenu"in e&&a(0,s=e.isMenu)},[s,o,n,()=>{a(0,s=!1)}]}class fe extends e{constructor(e){super(),t(this,e,me,pe,a,{page:1,world:2,isMenu:0})}}const{window:ge}=K;function ve(e){let t,a,o,n,r;function l(t){e[12](t)}function d(t){e[13](t)}function c(t){e[14](t)}let h={};return void 0!==e[3]&&(h.page=e[3]),void 0!==e[4]&&(h.world=e[4]),void 0!==e[2]&&(h.isMenu=e[2]),t=new fe({props:h}),_.push((()=>D(t,"page",l))),_.push((()=>D(t,"world",d))),_.push((()=>D(t,"isMenu",c))),{c(){V(t.$$.fragment)},l(e){F(t.$$.fragment,e)},m(e,a){L(t,e,a),r=!0},p(e,s){const i={};!a&&8&s&&(a=!0,i.page=e[3],H((()=>a=!1))),!o&&16&s&&(o=!0,i.world=e[4],H((()=>o=!1))),!n&&4&s&&(n=!0,i.isMenu=e[2],H((()=>n=!1))),t.$set(i)},i(e){r||(i(t.$$.fragment,e),r=!0)},o(e){s(t.$$.fragment,e),r=!1},d(e){M(t,e)}}}function we(e){let t,a,o,n;function r(t){e[10](t)}function l(t){e[11](t)}let d={};return void 0!==e[3]&&(d.page=e[3]),void 0!==e[4]&&(d.world=e[4]),t=new ne({props:d}),_.push((()=>D(t,"page",r))),_.push((()=>D(t,"world",l))),{c(){V(t.$$.fragment)},l(e){F(t.$$.fragment,e)},m(e,a){L(t,e,a),n=!0},p(e,n){const s={};!a&&8&n&&(a=!0,s.page=e[3],H((()=>a=!1))),!o&&16&n&&(o=!0,s.world=e[4],H((()=>o=!1))),t.$set(s)},i(e){n||(i(t.$$.fragment,e),n=!0)},o(e){s(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function ye(e){let t,a,o;function n(t){e[9](t)}let r={};return void 0!==e[3]&&(r.page=e[3]),t=new X({props:r}),_.push((()=>D(t,"page",n))),{c(){V(t.$$.fragment)},l(e){F(t.$$.fragment,e)},m(e,a){L(t,e,a),o=!0},p(e,o){const n={};!a&&8&o&&(a=!0,n.page=e[3],H((()=>a=!1))),t.$set(n)},i(e){o||(i(t.$$.fragment,e),o=!0)},o(e){s(t.$$.fragment,e),o=!1},d(e){M(t,e)}}}function be(e){let t,a,o,r;const l=[ye,we,ve],d=[];function h(e,t){return 0==e[3]?0:1==e[3]?1:2==e[3]?2:-1}return~(t=h(e))&&(a=d[t]=l[t](e)),{c(){a&&a.c(),o=N()},l(e){a&&a.l(e),o=N()},m(e,a){~t&&d[t].m(e,a),c(e,o,a),r=!0},p(e,n){let r=t;t=h(e),t===r?~t&&d[t].p(e,n):(a&&(R(),s(d[r],1,1,(()=>{d[r]=null})),B()),~t?(a=d[t],a?a.p(e,n):(a=d[t]=l[t](e),a.c()),i(a,1),a.m(o.parentNode,o)):a=null)},i(e){r||(i(a),r=!0)},o(e){s(a),r=!1},d(e){e&&n(o),~t&&d[t].d(e)}}}function $e(e){let t,a,o,n;function r(t){e[15](t)}function l(t){e[16](t)}let d={l:e[7]};return void 0!==e[2]&&(d.isMenu=e[2]),void 0!==e[4]&&(d.world=e[4]),t=new ce({props:d}),_.push((()=>D(t,"isMenu",r))),_.push((()=>D(t,"world",l))),{c(){V(t.$$.fragment)},l(e){F(t.$$.fragment,e)},m(e,a){L(t,e,a),n=!0},p(e,n){const s={};!a&&4&n&&(a=!0,s.isMenu=e[2],H((()=>a=!1))),!o&&16&n&&(o=!0,s.world=e[4],H((()=>o=!1))),t.$set(s)},i(e){n||(i(t.$$.fragment,e),n=!0)},o(e){s(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function xe(e){let t,a,o,r,l,d,g,w,$,x,k,T;E(e[8]),g=new W({props:{$$slots:{default:[be]},$$scope:{ctx:e}}});let A=!e[2]&&$e(e);return{c(){t=f("link"),a=f("link"),o=f("link"),r=f("link"),l=b(),d=f("section"),V(g.$$.fragment),w=b(),A&&A.c(),$=N(),this.h()},l(e){const s=C("svelte-gek19u",document.head);t=p(s,"LINK",{rel:!0,href:!0}),a=p(s,"LINK",{rel:!0,href:!0,crossorigin:!0}),o=p(s,"LINK",{href:!0,rel:!0}),r=p(s,"LINK",{href:!0,rel:!0}),s.forEach(n),l=y(e),d=p(e,"SECTION",{class:!0});var i=m(d);F(g.$$.fragment,i),i.forEach(n),w=y(e),A&&A.l(e),$=N(),this.h()},h(){u(t,"rel","preconnect"),u(t,"href","https://fonts.googleapis.com"),u(a,"rel","preconnect"),u(a,"href","https://fonts.gstatic.com"),u(a,"crossorigin",""),u(o,"href","https://fonts.googleapis.com/css2?family=Jua&display=swap"),u(o,"rel","stylesheet"),u(r,"href","https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200..1000;1,200..1000&display=swap"),u(r,"rel","stylesheet"),u(d,"class","svelte-hrinur"),I(d,"display",e[2]?"flex":"none")},m(n,s){h(document.head,t),h(document.head,a),h(document.head,o),h(document.head,r),c(n,l,s),c(n,d,s),L(g,d,null),c(n,w,s),A&&A.m(n,s),c(n,$,s),x=!0,k||(T=v(ge,"resize",e[8]),k=!0)},p(e,[t]){const a={};2097180&t&&(a.$$scope={dirty:t,ctx:e}),g.$set(a),4&t&&I(d,"display",e[2]?"flex":"none"),e[2]?A&&(R(),s(A,1,1,(()=>{A=null})),B()):A?(A.p(e,t),4&t&&i(A,1)):(A=$e(e),A.c(),i(A,1),A.m($.parentNode,$))},i(e){x||(i(g.$$.fragment,e),i(A),x=!0)},o(e){s(g.$$.fragment,e),s(A),x=!1},d(e){e&&(n(l),n(d),n(w),n($)),n(t),n(a),n(o),n(r),M(g),A&&A.d(e),k=!1,T()}}}function ke(e,t,a){let o,n,s,i,r,l,d=!0,c=0,h={w1:null,w2:null,w3:null};return l=window.localStorage.getItem("kply-lvl"),l?h=JSON.parse(l):(console.log("first time"),h.w1=1,h.w2=1,h.w3=1,window.localStorage.setItem("kply-lvl",JSON.stringify(h))),e.$$.update=()=>{e.$$.dirty},a(6,o=0),a(1,n=0),a(5,s=0),a(0,i=0),[i,n,d,c,r,s,o,undefined,function(){a(1,n=ge.innerWidth),a(6,o=ge.outerWidth),a(0,i=ge.innerHeight),a(5,s=ge.outerHeight)},function(e){c=e,a(3,c)},function(e){c=e,a(3,c)},function(e){r=e,a(4,r)},function(e){c=e,a(3,c)},function(e){r=e,a(4,r)},function(e){d=e,a(2,d)},function(e){d=e,a(2,d)},function(e){r=e,a(4,r)}]}class Te extends e{constructor(e){super(),t(this,e,ke,xe,a,{})}}export{Te as component};
